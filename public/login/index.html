<!doctype html>

<html lang="en" class="homepage">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=0">

    <title>GSM Login</title>
    <meta name="description" content="Example">

    <link rel="stylesheet" href="../style.css">
</head>

<body style="background-image: url(../greentile.png); background-size: 100px;">
    <textarea placeholder="Username" name="Username Input" id="usernameInput"></textarea>
    <textarea placeholder="Password" name="Password Input" id="passwordInput"></textarea>

    <button id="logbtn">Log in</button>

    <script>
        const params = new URLSearchParams(window.location.search);
        let redir = params.get('redir');
        
        document.getElementById('logbtn').onclick = async function() {
            let service = new ServiceConnection(true);
            let username = document.getElementById('usernameInput').value;

            let sess = await service.requestSession(
                username,
                document.getElementById('passwordInput').value
            );

            window.location.href = redir + `?sessID=${sess}&user=${username}`;
        }
    </script>

    <script src="../frontend/GreysServiceManager.js"></script>
</body>

</html>